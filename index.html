<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tap-a-lap-splash!</title>

    <script src="js/libraries/Tone.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tonaljs/tonal/browser/tonal.min.js"></script>
    <script src="js/utils/theoryHelper.js"></script>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="js/gif-shader.js"></script>
    <script src="js/newOcean.js"></script>
    <script src="js/sketch.js"></script>
    <link rel="stylesheet" href="styles.css">
    
</head>
<body>
<!-- 
    <div id="overlay">
        <p>Sorry! Tap-a-lap-splash is only available for desktop play. Please check back soon for a mobile-friendly update or visit this url on a laptop or desktop computer.</p>
        <img src="img/laptop.svg">

    </div> -->

    <a-scene vr-mode-ui="enabled: false" fog="type: linear; color: #AAA" >
        <a-assets>
            <img id="key" src="img/key.png">
            <img id="space" src="img/space-bar.png">
            <img id="bird1" src="img/bird-1.png" >
            <img id="bird2" src="img/bird-2.png" >
            <img id="bird3" src="img/bird-3.png" >
            <img id="dolphin" src="img/dolphin.png" >
            <img id="fish" src="img/fish.png" >
            <img id="sky" src="img/sky-base.png">
            <img id="whale" src="img/whale.gif">
            <audio id="dolphinClick" src="samples/dolphins-underwater.wav"></audio>
            <audio id="birdCall" src="samples/gull.wav"></audio>
            <audio id="splash" src="samples/watersplursh.wav"></audio>
        </a-assets>

        <!-- environment -->
        <!-- <a-sky></a-sky> -->
    <a-entity id="env" position="0 0 0" env-controls>
        <a-sky id="sky"  src="#sky" color="hsl(360, 100%, 80%)"></a-sky>
        <a-circle id="sun"
            radius="20"
            position="0 220 -200"
            emissive="#ff9900"
            emissiveIntensity=".1"
        >
            <a-entity id="sunLight" light="type: point;  intensity: 1; decay: 2" color="hsl(344, 87%, 72%)"
            position="0 0 8"></a-entity>
            <a-entity id="sunLight" light="type: point;  intensity: 1; decay: 2" color="#fff"
            position="0 0 -1"></a-entity>
        </a-circle>
        <a-light id="ambient" type="ambient" intensity=".75" color="hsl(39, 100%, 89%)" ></a-light>        
        <a-ocean id="waves" color="hsla(217, 100%, 62%, 1)" width="100" depth="52" speed="2" density="300" position="0 0 100"></a-ocean>
        <a-ocean id="waves" color="hsla(217, 100%, 62%, 1)" width="100" depth="52" speed="2" density="100" position="0 0 50"></a-ocean>
        <a-ocean id="waves" color="hsla(217, 100%, 62%, 1)" width="100" depth="52" speed="2" density="50" position="0 0 0"></a-ocean>

        <a-entity id="whales">
            <a-entity
                geometry="primitive:plane;width:3;height:3;"
               
                material="shader:gif;src:#whale;alphaTest:0.5; side:double;"
                position="-1 1 -25"
                rotation="0 180 0"
                sound="
                    src: #splash;
                    autoplay: true;
                    loop: true;
                    volume: .5"
                animation="
                    property: position;
                    to: -2 1 -15;
                    dur: 2300;
                    easing: linear;
                    loop: true;"
            ></a-entity>
            <a-entity
                geometry="primitive:plane;width:3;height:3;"
                
                material="shader:gif;src:#whale;alphaTest:0.5;"
                position="1.5 1 -15"
                rotation="0 0 0"
                sound="
                    src: #splash;
                    autoplay: true;
                    loop: true;
                    volume: .5"
                animation="
                    property: position;
                    to: 2.5 1 -5;
                    dur: 2300;
                    easing: linear;
                    loop: true;"
            ></a-entity>
        </a-entity>

        <!-- <a-ocean
          id="waves"
          color="#92E2E2"
          width="100"
          depth="200"
          speed="2"
          density="200"
        ></a-ocean> -->

        <a-entity
          id="waves"
          new-ocean="width: 100; depth: 200; density:200; speed: 2; color:#92E2E2 "
          rotation="-90 0 0"
        ></a-entity>


        <a-entity id="camera" camera="" position="0 .35 98" 
        swim-controls look-controls>
       
            <a-entity id="titleCard" position="0 0 0" visible="true">
                <a-entity 
                text="
                    value: tap-a-lap-splash!;
                    color: #4F3266;
                    align: center;
                    font: fonts/porpora.fnt;
                    anchor: center;"
              scale="2 2 2"
              position="0 .265 -0.5"
            ></a-entity>
            <a-entity
              text="
                    value: a rhythmic meditation for swimmers and the people who love them;
                    color: #4F3266;
                    align: center;
                    font: roboto;
                    wrapCount: 100;
                    anchor: center;"
                    scale="1 1 1"
                    position="0 .18 -0.5"></a-entity>
                   
                    <a-entity id="spaceKey"   
                    geometry="
                        primitive: plane; 
                        width: .6;
                        height: .075;
                        
                        "
              scale=".6 .6 .6"
              material="
                            src: #space;
                            transparent: false;
                            alphaTest: .5;
                            fog: false;
                            color: #4F3266;
                            "
              position="0 .1 -.5"
            >
              <a-entity
                id="space"
                text="
                            value: PRESS SPACEBAR TO BEGIN;
                            align: center;
                            anchor: center;
                            color: #4F3266;
                            font: roboto"
                scale=".75 .75 .75"
                position="0 0 0"
              >
              </a-entity>
            </a-entity>
          </a-entity>

          <a-entity id="guide" position="0 0 0" visible="false">
            <a-entity
              text="
                    value: PRESS T TO TOGGLE GUIDE;
                    color: #4F3266;
                    align: center;
                    font: roboto;
                    anchor: center;"
                    scale=".5 .5 .5"
                    position="0 .3 -0.5"></a-entity>
                <a-entity id="leftControls" position="-.5 0 0" >
                    <a-entity id="qKey"   
                        geometry="
                            primitive: plane; 
                            width: .075;
                            height: .075;
                            "
                material="
                                src: #key;
                                transparent: false;
                                alphaTest: .5;
                                color: #4F3266;
                                "
                            position="0 0 -.5"
                            
                    >   
                        <a-entity id="qGuide" text="
                                value: LEFT BREATH;
                                align: left;
                                anchor:  left;
                                opacity: 0;
                                color: #4F3266;
                                font: roboto;"
                            position="-0.036 .06 0" scale=".5 .5 .5">
                        </a-entity>
                        <a-entity id="letterQ" text="
                                value: Q;
                                align: center;
                                anchor: center;
                                color: #4F3266;
                                font: roboto"
                  position="0 0 0"
                >
                </a-entity>
                <a-entity
                  geometry="
                                primitive: plane; 
                                width: .068;
                                height: .068;"
                  material="
                                    color: #81B4B7;
                                    opacity: .5;"
                  position="0 0 -.0001"
                ></a-entity>
              </a-entity>
              <a-entity
                id="dKey"
                geometry="
                        primitive: plane; 
                        width: .075;
                        height: .075;
                        "
                material="
                            src: #key;
                            transparent: false;
                            alphaTest: .5;
                            color: #4F3266;
                            "
                        position=".2 -.08 -.5"
                        emissive="#fff"
                        emissiveIntensity=".1"
                        
                >
                    <a-entity id="dGuide" text="
                        value: LEFT STROKE;
                        align: left;
                        anchor:  left;
                        opacity: 0;
                        color: #4F3266;
                        font: roboto;"
                        scale=".5 .5 .5"
                        position="-0.036 -0.06 0">
                    </a-entity>
                    <a-entity id="letterD" text="
                            value: D;
                            align: center;
                            anchor: center;
                            color: #4F3266;
                            font: roboto"
                  position="0 0 0"
                >
                </a-entity>
                <a-entity
                  geometry="
                            primitive: plane; 
                            width: .068;
                            height: .068;"
                  material="
                                color: #81B4B7;
                                opacity: .5;"
                  position="0 0 -0.0001"
                ></a-entity>
              </a-entity>
              <a-entity
                geometry="
                                primitive: plane; 
                                width: .075;
                                height: .075;
                                "
                material="
                                    src: #key;
                                    transparent: true;
                                    alphaTest: .5;
                                    color: #cdcdcd;
                                    "
                position=".08 0 -.5"
              >
                <a-entity
                  geometry="
                                    primitive: plane; 
                                    width: .067;
                                    height: .067;"
                  material="
                                        color: #A9B5B6;
                                        opacity: .5;"
                  position="0 0 -.0001"
                ></a-entity>
              </a-entity>
              <a-entity
                geometry="
                            primitive: plane; 
                            width: .075;
                            height: .075;
                            "
                material="
                                src: #key;
                                transparent: true;
                                alphaTest: .5;
                                color: #cdcdcd;
                                "
                position=".16 0 -.5"
              >
                <a-entity
                  geometry="
                                primitive: plane; 
                                width: .067;
                                height: .067;"
                  material="
                                    color: #A9B5B6;
                                    opacity: .5;"
                  position="0 0 -.0001"
                ></a-entity>
              </a-entity>
            </a-entity>
            <a-entity id="rightControls" position=".3 0 0">
              <a-entity
                id="kKey"
                geometry="
                            primitive: plane; 
                            width: .075;
                            height: .075;
                            "
                material="
                                src: #key;
                                transparent: false;
                                alphaTest: .5;
                                color: #4F3266;
                                "
                            position="0 -.08 -.5"
                            
                    >
                        <a-entity id="kGuide" text="
                            value: RIGHT STROKE;
                            align: right;
                            anchor:  right;
                            opacity: 0;
                            color: #4F3266;
                            font: roboto"
                            scale=".5 .5 .5"
                            position="0.038 -0.06 0">
                        </a-entity>
                        <a-entity id="letterK" text="

                                value: K;
                                align: center;
                                anchor: center;
                                color: #4F3266;
                                font: roboto"
                  position="0 0 0"
                >
                </a-entity>
                <a-entity
                  geometry="
                                primitive: plane; 
                                width: .068;
                                height: .068;"
                  material="
                                    color: #81B4B7;
                                    opacity: .5;"
                  position="0 0 -.0001"
                ></a-entity>
              </a-entity>
              <a-entity
                id="pKey"
                geometry="
                        primitive: plane; 
                        width: .075;
                        height: .075;
                        "
                material="
                            src: #key;
                            transparent: false;
                            color: #4F3266;
                            alphaTest: .5;
                            "
                        position=".2 0 -.5"
                        position="0 0 -.5"
                        
                >
                    <a-entity id="pGuide" text="
                            value: RIGHT BREATH;

                            align: right;
                            anchor:  right;
                            color: #4F3266;
                            opacity: 0;
                            font: roboto"
                            scale=".5 .5 .5"
                            position="0.038 .06 0">
                    </a-entity>
                    <a-entity id="letterP" text="

                            value: P;
                            align: center;
                            anchor: center;
                            font: roboto;
                            color:#4F3266"
                        position="0 0 0">
                    </a-entity>
                    <a-entity 
                        geometry="

                            primitive: plane; 
                            width: .068;
                            height: .068;"
                  material="
                                color: #81B4B7;
                                opacity: .5;"
                  position="0 0 -0.0001"
                ></a-entity>
              </a-entity>
              <a-entity
                geometry="
                                primitive: plane; 
                                width: .075;
                                height: .075;
                                "
                material="
                                    src: #key;
                                    transparent: true;
                                    alphaTest: .5;
                                    color: #cdcdcd;
                                    "
                position=".04 0 -.5"
              >
                <a-entity
                  geometry="
                                    primitive: plane; 
                                    width: .067;
                                    height: .067;"
                  material="
                                        color: #A9B5B6;
                                        opacity: .5;"
                  position="0 0 -.0001"
                ></a-entity>
              </a-entity>
              <a-entity
                geometry="
                            primitive: plane; 
                            width: .075;
                            height: .075;
                            "
                material="
                                src: #key;
                                transparent: true;
                                alphaTest: .5;
                                color: #cdcdcd;
                                "
                position=".12 0 -.5"
              >
                <a-entity
                  geometry="
                                primitive: plane; 
                                width: .067;
                                height: .067;"
                  material="
                                    color: #A9B5B6;
                                    opacity: .5;"
                  position="0 0 -.0001"
                ></a-entity>
              </a-entity>
            </a-entity>
          </a-entity>
        </a-entity>
      </a-entity>
      <!-- entities -->
    </a-scene>
  </body>
</html>
